html
  head
      title= settings.title
      link(rel='stylesheet', href='./css/main.css')
      link(rel='stylesheet', href='./css/bootstrap.css')
      script(src='./js/jquery.min.js')
      script(src='./js/bootstrap.min.js')
      script(src='./js/moment.js')
  body(ng-app="bunny")
    .navbar.navbar-inverse.navbar-fixed-top(role='navigation')
      .container
        .navbar-header
          button.navbar-toggle(type='button', data-toggle='collapse', data-target='.navbar-collapse')
            span.sr-only Toggle navigation
            span.icon-bar
            span.icon-bar
            span.icon-bar
          a.navbar-brand(href='#') Bunny Cron
    .container(ng-controller="JobsCtrl")
      .starter-template
        h1 [icon] Bunny Scheduler
        h2 Scheduled Jobs
        table.table.table-striped.jobs
          thead
            tr
              th TASK
              th FREQUENCY
              th LAST RUN
              th NEXT RUN
              th RESULT
          tbody
            tr(ng-repeat="job in jobs")
              td.command  {{job.command}}
              td.schedule {{job.schedule}}
              td.last_run {{job.completed_at | date:'MMM dd HH:mm'}}
              td.next_run {{job.next_run | date:'MMM dd HH:mm'}}
              td.log(ng-click="updateLog(job.id);showModal(job.logs[0].length)")
                span {{job.logs[0].substr(0,100)}} <strong>...</strong>
              
        div.modal.fade.modal-logs(tabindex='-1', role='dialog', aria-labelledby='myLargeModalLabel', aria-hidden='true')
          div.logs(tabindex='-1', role='dialog', aria-labelledby='myLargeModalLabel', aria-hidden='true')
            div.modal-dialog.modal-lg
              div.modal-content
                ul.list-group
                  li.list-group-item(ng-repeat="log in logs track by $index" , ng-bind-html="log | to_trusted")
                    
  script(src='./js/angular.min.js')
  script(src='./js/main.js')
